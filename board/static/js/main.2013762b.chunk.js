(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{30:function(e,t,n){e.exports=n(42)},42:function(e,t,n){"use strict";n.r(t);var r=n(0),a=n.n(r),i=n(21),o=n(12),c=n(16),u=n(28),s=n(10),l=n(24),h=n.n(l),d="up";function p(e){!function(e){e.Turn=e.Turn||0;var t=!0,n=!1,r=void 0;try{for(var a,i=e.Snakes[Symbol.iterator]();!(t=(a=i.next()).done);t=!0){var o=a.value,c=!0,u=!1,s=void 0;try{for(var l,h=o.Body[Symbol.iterator]();!(c=(l=h.next()).done);c=!0){var d=l.value;d.X=d.X||0,d.Y=d.Y||0}}catch(b){u=!0,s=b}finally{try{c||null==h.return||h.return()}finally{if(u)throw s}}}}catch(b){n=!0,r=b}finally{try{t||null==i.return||i.return()}finally{if(n)throw r}}var p=!0,f=!1,m=void 0;try{for(var v,g=e.Food[Symbol.iterator]();!(p=(v=g.next()).done);p=!0){var y=v.value;y.X=y.X||0,y.Y=y.Y||0}}catch(b){f=!0,m=b}finally{try{p||null==g.return||g.return()}finally{if(f)throw m}}}(e);var t,n=m(e.Snakes);return{turn:e.Turn,snakes:n,food:(t=e.Food,t.map(w)),gameOver:O(e)}}function f(e){var t=h()(e);for(var n in t.snakes){var r=t.snakes[n];r.headSvg=null,r.tailSvg=null,r._id=null}return t}function m(e){return e.map(v)}function v(e){return{body:e.Body.map(function(t,n){return function(e,t){var n=e.Body[t],r=e.Body[t-1];return{direction:r?k(n,r):y(e),shouldRender:!b(e,t),type:E(e,t),x:n.X,y:n.Y}}(e,n)}),color:e.Color,_id:e.ID,name:e.Name,health:e.Health,isDead:!!e.Death,death:g(e.Death),head:e.HeadType,tail:e.TailType,headSvg:e.HeadSvg,tailSvg:e.TailSvg}}function g(e){if(e)return{cause:e.Cause,turn:e.Turn||0}}function y(e){return e.Body.length>1?k(e.Body[1],e.Body[0]):d}function b(e,t){var n=e.Body[t],r=e.Body[t-1];return r&&r.X===n.X&&r.Y===n.Y}function w(e){return{x:e.X,y:e.Y}}function k(e,t){return e.X<t.X?"right":t.X<e.X?"left":e.Y<t.Y?"down":"up"}function E(e,t){return 0===t?"head":t===e.Body.length-1?"tail":"body"}function O(e){var t=m(e.Snakes);return 0===t.length||(1===t.length?!!t[0].death:function(e){return e.filter(function(e){return!e.death}).length<=1}(t))}function x(e){if(window.parent)try{window.parent.postMessage(e,"*")}catch(t){console.error(t)}}function j(e){var t=e.split("=");return{key:t[0],value:void 0===t[1]||decodeURIComponent(t[1])}}function S(e){if(!e)return"";var t="?",n="";for(var r in e){var a=e[r];n+="".concat(t).concat(r,"=").concat(a),t="&"}return n}function T(e){var t={http:"ws",https:"wss"};for(var n in t){var r=t[n];if(e.substr(0,n.length+1)===n+":")return r+e.substr(n.length)}throw new Error("Invalid URL: "+e)}function F(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return t.reduce(function(e,t){return function(e,t){var n=e.replace(/\/+$/,""),r=t.replace(/^\/+/,"");return""===n?r:""===r?n:"".concat(n,"/").concat(r)}(e,t)},"")}var R=n(3),C=n(4),_=n(6),M=n(5),G=n(7),P=n(11),B=n(2),H=function(e){function t(){return Object(R.a)(this,t),Object(_.a)(this,Object(M.a)(t).apply(this,arguments))}return Object(G.a)(t,e),Object(C.a)(t,[{key:"render",value:function(){return a.a.createElement("div",null,"To run a game you need to specify engine and game parameters in the URL. For example:",a.a.createElement("pre",null,window.location.origin,"?engine=<ENGINE_URL>&game=<GAME_ID>"))}}]),t}(a.a.Component),A="#ff5c75",I="#fefefe",L="#f1f1f1",N="#bbb",U="#efefef",z="#222",X="#6f42c1",D="#f1f1f1",Y="#f8f9fa",K="768px",V="dark",W="light",J=Object(B.a)("div")({display:"flex",alignItems:"center",justifyContent:"center",height:"100%",width:"100%"}),Q=function(e){function t(){return Object(R.a)(this,t),Object(_.a)(this,Object(M.a)(t).apply(this,arguments))}return Object(G.a)(t,e),Object(C.a)(t,[{key:"render",value:function(){return a.a.createElement(J,null,a.a.createElement("div",{className:"la-ball-grid-beat la-dark la-2x",style:{color:A}},a.a.createElement("div",null),a.a.createElement("div",null),a.a.createElement("div",null),a.a.createElement("div",null),a.a.createElement("div",null),a.a.createElement("div",null),a.a.createElement("div",null),a.a.createElement("div",null),a.a.createElement("div",null)))}}]),t}(a.a.Component),$=.15,q=.1,Z=20,ee=4,te=(Z/3.25).toFixed(2);function ne(e){return(Z+ee)*e+ee}function re(e){var t="left"===e.direction||"right"===e.direction?ee:0;return Z+t}function ae(e){var t="up"===e.direction||"down"===e.direction?ee:0;return Z+t}function ie(e){var t="left"===e.direction?-ee:0;return ne(e.x)+t}function oe(e){var t="up"===e.direction?-ee:0;return ne(e.y)+t}function ce(e,t){if(e.isDead){if(t)return e._id===t?1:0}else if(t)return e._id===t?1:$;return e.isDead?q:1}function ue(e){for(var t=[],n=0;n<e;n++)t.push(n);return t}var se=function(e){function t(){return Object(R.a)(this,t),Object(_.a)(this,Object(M.a)(t).apply(this,arguments))}return Object(G.a)(t,e),Object(C.a)(t,[{key:"renderPart",value:function(e,t,n,r,a){switch(n.type){case"head":return this.renderHeadPart(e,t,n,a);case"tail":return this.renderTailPart(e,t,n,a);default:return function(e,t){if(0===t||t===e.body.length-1)return!1;var n=e.body[t+1],r=e.body[t];return(n.x!==r.x||n.y!==r.y)&&n.direction!==r.direction}(e,r)?this.renderCornerPart(e,t,n,r,a):this.renderMiddlePart(e,t,n,r,a)}}},{key:"renderHeadPart",value:function(e,t,n,r){var i=function(e){switch(e.direction){case"left":case"right":default:return ne(e.x)}}(n),o=function(e){switch(e.direction){case"up":case"down":default:return ne(e.y)}}(n),c=e.headSvg.viewBox.baseVal,u=function(e,t){var n=t.width/2,r=t.height/2;switch(e){case"left":return"rotate(180 ".concat(n," ").concat(r,")");case"up":return"rotate(-90 ".concat(n," ").concat(r,")");case"down":return"rotate(90 ".concat(n," ").concat(r,")");default:return""}}(n.direction,c),s="".concat(c.x," ").concat(c.y," ").concat(c.width," ").concat(c.height);return a.a.createElement("svg",{key:"part"+t+",head",viewBox:s,x:i,y:o,width:Z,height:Z,fill:e.color,opacity:ce(e,r),shapeRendering:"optimizeSpeed"},a.a.createElement("g",{transform:u,dangerouslySetInnerHTML:{__html:e.headSvg.innerHTML}}))}},{key:"renderMiddlePart",value:function(e,t,n,r,i){return n.shouldRender?a.a.createElement("rect",{key:"part".concat(t,",").concat(n.x,",").concat(n.y),x:ie(n),y:oe(n),width:re(n),height:ae(n),fill:e.color,opacity:ce(e,i),shapeRendering:"optimizeSpeed"}):a.a.createElement("svg",{key:"part"+t+","+r})}},{key:"renderCornerPart",value:function(e,t,n,r,i){if(!n.shouldRender)return a.a.createElement("svg",{key:"part".concat(t,",").concat(n.x,",").concat(n.y),shapeRendering:"optimizeSpeed"});var o,c;switch(n.direction){case"left":case"right":o="0 0 120 100";break;case"up":case"down":default:o="0 0 100 120"}switch(function(e,t){if(0===t||t===e.body.length-1)return!1;var n=e.body[t+1],r=e.body[t];return"".concat(r.direction," ").concat(n.direction)}(e,r)){case"down left":c="scale(-1,1) translate(-100, 0)";break;case"left down":c="rotate(90,0,0) translate(0,-120)";break;case"right down":c="rotate(90,0,0) scale(1,-1)";break;case"up right":c="scale(1,-1) translate(0,-120)";break;case"up left":c="scale(-1,-1) translate(-100,-120)";break;case"right up":c="rotate(-90,0,0) translate(-100,0)";break;case"left up":c="rotate(-90,0,0) scale(1,-1) translate(-100,-120)"}return a.a.createElement("svg",{key:"part".concat(t,",").concat(n.x,",").concat(n.y),x:ie(n),y:oe(n),width:re(n),height:ae(n),opacity:ce(e,i),fill:e.color,viewBox:o,shapeRendering:"optimizeSpeed"},a.a.createElement("path",{d:"M0,0 h40 a60,60 0 0 1 60,60 v80 h-100 z",transform:c}))}},{key:"renderTailPart",value:function(e,t,n,r){var i=function(e){switch(e.direction){case"left":return ne(e.x)-ee;case"right":return ne(e.x)+ee;default:return ne(e.x)}}(n),o=function(e){switch(e.direction){case"up":return ne(e.y)-ee;case"down":return ne(e.y)+ee;default:return ne(e.y)}}(n),c=e.tailSvg.viewBox.baseVal,u=function(e,t){var n=t.width/2,r=t.height/2;switch(e){case"right":return"rotate(180 ".concat(n," ").concat(r,")");case"down":return"rotate(-90 ".concat(n," ").concat(r,")");case"up":return"rotate(90 ".concat(n," ").concat(r,")");default:return""}}(n.direction,c),s="".concat(c.x," ").concat(c.y," ").concat(c.width," ").concat(c.height);return n.shouldRender?a.a.createElement("svg",{key:"part"+t+",tail",viewBox:s,x:i,y:o,width:Z,height:Z,fill:e.color,opacity:ce(e,r),shapeRendering:"optimizeSpeed"},a.a.createElement("g",{transform:u,dangerouslySetInnerHTML:{__html:e.tailSvg.innerHTML}})):a.a.createElement("svg",{key:"part"+t+",tail"})}},{key:"renderGrid",value:function(){var e=this,t=this.props.snakes||[],n=this.props.food||[],r=t.concat().sort(function(e,t){return(e.isDead?0:1)-(t.isDead?0:1)}),i=ne(this.props.columns),o=ne(this.props.rows);return a.a.createElement("svg",{width:this.props.maxWidth,height:this.props.maxHeight,x:this.props.x,y:this.props.y,viewBox:"0 0 ".concat(i," ").concat(o)},ue(this.props.rows).map(function(t,n){return ue(e.props.columns).map(function(t,r){return a.a.createElement("rect",{key:"cell"+n+","+r,x:ne(r),y:ne(n),width:Z,height:Z,fill:e.props.theme===V?"#ddd":D,opacity:e.props.theme===V?.75:null,shapeRendering:"optimizeSpeed"})})}),r.map(function(t,n){return t.body.map(function(r,a){return e.renderPart(t,n,r,a,e.props.highlightedSnake)})}),n.map(function(e,t){return a.a.createElement("circle",{key:"food"+t,cx:ne(e.x)+Z/2,cy:ne(e.y)+Z/2,r:te,fill:A,shapeRendering:"optimizeQuality"})}))}},{key:"render",value:function(){return this.props.snakes?this.renderGrid():void 0}}]),t}(a.a.Component),le=function(e){function t(){return Object(R.a)(this,t),Object(_.a)(this,Object(M.a)(t).apply(this,arguments))}return Object(G.a)(t,e),Object(C.a)(t,[{key:"render",value:function(){return a.a.createElement("svg",{viewBox:"0 0 ".concat(100," ").concat(100)},a.a.createElement(se,{snakes:this.props.snakes,food:this.props.food,columns:this.props.columns,rows:this.props.rows,highlightedSnake:this.props.highlightedSnake,theme:this.props.theme,maxWidth:100,maxHeight:100,x:0,y:0}))}}]),t}(a.a.Component),he=n(1),de=n.n(he),pe=n(8);function fe(e,t){var n=!1;return new Promise(function(r,a){var i=new WebSocket(e);i.addEventListener("message",function(e){var a=JSON.parse(e.data);(n=t(a))&&(i.close(),r())}),i.addEventListener("onerror",function(e){a(e)}),i.addEventListener("onclose",function(e){n||(n=!0,r())})})}var me={};function ve(e){return me[e]}function ge(e){return e in me?Promise.resolve(me[e]):function(e){return ye.apply(this,arguments)}(e)}function ye(){return(ye=Object(pe.a)(de.a.mark(function e(t){var n,r,a;return de.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch(t);case 2:return n=e.sent,e.next=5,n.text();case 5:return r=e.sent,a=be(r),me[t]=a,e.abrupt("return",a);case 9:case"end":return e.stop()}},e,this)}))).apply(this,arguments)}function be(e){var t=document.createElement("div");return t.innerHTML=e.trim(),t.firstChild}var we="tongue",ke="bolt";function Ee(){return(Ee=Object(pe.a)(de.a.mark(function e(t,n){var r;return de.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch(t+S(n));case 2:return r=e.sent,e.abrupt("return",r.json());case 4:case"end":return e.stop()}},e,this)}))).apply(this,arguments)}function Oe(e){return new Promise(function(t){return setTimeout(t,e)})}function xe(e){var t=e.reduce(function(e,t){return e.concat([t.HeadType,t.TailType])},[]),n=new Set(t);return Array.from(n)}function je(e){var t=!0,n=!1,r=void 0;try{for(var a,i=e[Symbol.iterator]();!(t=(a=i.next()).done);t=!0){var o=a.value;o.HeadType||(o.HeadType=we),o.TailType||(o.TailType=ke),o.HeadType=Ce(o.HeadType),o.TailType=_e(o.TailType)}}catch(c){n=!0,r=c}finally{try{t||null==i.return||i.return()}finally{if(n)throw r}}}function Se(e){return Te.apply(this,arguments)}function Te(){return(Te=Object(pe.a)(de.a.mark(function e(t){var n,r,a,i,o,c;return de.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return je(t),e.next=3,u=xe(t),Promise.all(u.map(ge));case 3:for(n=!0,r=!1,a=void 0,e.prev=6,i=t[Symbol.iterator]();!(n=(o=i.next()).done);n=!0)(c=o.value).HeadSvg=ve(c.HeadType),c.TailSvg=ve(c.TailType);e.next=14;break;case 10:e.prev=10,e.t0=e.catch(6),r=!0,a=e.t0;case 14:e.prev=14,e.prev=15,n||null==i.return||i.return();case 17:if(e.prev=17,!r){e.next=20;break}throw a;case 20:return e.finish(17);case 21:return e.finish(14);case 22:case"end":return e.stop()}var u},e,this,[[6,10,14,22],[15,,17,21]])}))).apply(this,arguments)}function Fe(e){return e.indexOf("/")>=0||e.indexOf(".")>=0}function Re(e,t){return F(e,t)+".svg"}function Ce(e){return Re("images/snake/head",Fe(e)?we:e)}function _e(e){return Re("images/snake/tail",Fe(e)?ke:e)}function Me(e){return Ge.apply(this,arguments)}function Ge(){return(Ge=Object(pe.a)(de.a.mark(function e(t){return de.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Se(t.Snakes);case 2:case"end":return e.stop()}},e,this)}))).apply(this,arguments)}function Pe(e,t){return function(e,t){return Ee.apply(this,arguments)}(F(e,"games/".concat(t)))}function Be(e,t){return He.apply(this,arguments)}function He(){return(He=Object(pe.a)(de.a.mark(function e(t,n){var r;return de.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=F(t,"games/".concat(n,"/start")),e.next=3,fetch(r,{method:"POST",cache:"no-cache"});case 3:case"end":return e.stop()}},e,this)}))).apply(this,arguments)}function Ae(e,t,n){return Ie.apply(this,arguments)}function Ie(){return(Ie=Object(pe.a)(de.a.mark(function e(t,n,r){var a,i,o,c;return de.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return o=function(e){return i=i.then(Object(pe.a)(de.a.mark(function t(){return de.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Me(e);case 2:return t.abrupt("return",r(a,e));case 3:case"end":return t.stop()}},t,this)}))),O(e)},e.next=3,Pe(t,n);case 3:return a=e.sent,i=Promise.resolve(),c=F(T(t),"socket/".concat(n)),e.next=8,fe(c,o);case 8:return e.next=10,i;case 10:case"end":return e.stop()}},e,this)}))).apply(this,arguments)}function Le(e,t){return e.filter(function(e){return e.turn===t})[0]}var Ne=Object(B.a)("div")({marginBottom:".5rem",paddingTop:"1rem",width:"100%",paddingBottom:"1rem"}),Ue=Object(B.a)("span")({display:"block",paddingBottom:"1rem"}),ze=Object(B.a)("div")({width:"100%",height:"1.8rem",background:I,borderRadius:"1.5rem"}),Xe=Object(B.a)("div")(function(e){return{height:"100%",backgroundColor:e.color,borderRadius:"inherit"}}),De=Object(B.a)("div")(function(e){return{height:"100%",padding:".2rem .5rem",fontSize:"1.2rem",backgroundColor:e.theme===V?N:L,borderRadius:"inherit",color:z}}),Ye=function(e){function t(){return Object(R.a)(this,t),Object(_.a)(this,Object(M.a)(t).apply(this,arguments))}return Object(G.a)(t,e),Object(C.a)(t,[{key:"render",value:function(){return a.a.createElement(Ne,null,a.a.createElement(Ue,null,this.props.snake.name),a.a.createElement(ze,null,this.props.snake.death?a.a.createElement(De,{theme:this.props.theme},function(e){switch(e){case"snake-collision":return"Collided with snake body";case"snake-self-collision":return"Collided with own body";case"starvation":return"Starvation";case"head-collision":return"Head on head collision";case"wall-collision":return"Collided with a wall";default:return e}}(this.props.snake.death.cause)):a.a.createElement(Xe,{color:this.props.snake.color,style:{width:"".concat(this.props.snake.health,"%")}})))}}]),t}(a.a.Component);function Ke(){var e=Object(P.a)(["\n  transition: background-color 0.2s, box-shadow 0.2s;\n  box-shadow: ",";\n\n  &:hover {\n    background-color: ",";\n    cursor: pointer;\n  }\n"]);return Ke=function(){return e},e}function Ve(){var e=Object(P.a)(["\n  display: none;\n  padding-right: 2rem;\n  color: ",";\n  font-weight: 700;\n  font-size: 2.2rem;\n\n  @media (min-width: ",") {\n    display: ",";\n  }\n"]);return Ve=function(){return e},e}var We=Object(B.a)("div")(Ve(),function(e){return e.theme===V?U:z},K,function(e){return e.hide?"none":"block"}),Je=Object(B.a)("div")(Ke(),function(e){return e.highlighted?"0 0 0 1px ".concat(U):null},function(e){return e.theme===V?X:Y}),Qe=function(e){function t(){var e,n;Object(R.a)(this,t);for(var r=arguments.length,a=new Array(r),i=0;i<r;i++)a[i]=arguments[i];return(n=Object(_.a)(this,(e=Object(M.a)(t)).call.apply(e,[this].concat(a)))).state={highlightedSnake:null},n.toggleHighlight=function(e){var t=function(e,t){return e.highlightedSnake!==t._id?t._id:null};n.props.highlightSnake(t(n.state,e)),n.setState(function(n){return{highlightedSnake:t(n,e)}})},n}return Object(G.a)(t,e),Object(C.a)(t,[{key:"render",value:function(){var e=this,t=this.state.highlightedSnake;return a.a.createElement(We,{theme:this.props.theme},this.props.snakes?function(e){var t=e.filter(function(e){return!e.isDead}).sort(function(e,t){var n=e.name.toLowerCase(),r=t.name.toLowerCase();return n<r?-1:n>r?1:0}),n=e.filter(function(e){return e.isDead}).sort(function(e,t){return e.death.turn-t.death.turn}).reverse();return t.concat(n)}(this.props.snakes).map(function(n,r){return a.a.createElement(Je,{key:"avatarwrapper"+r,onClick:function(){return e.toggleHighlight(n)},highlighted:t===n._id,theme:e.props.theme},a.a.createElement(Ye,{snake:n,key:"avatar"+r,theme:e.props.theme}))}):void 0)}}]),t}(a.a.Component),$e=n(26),qe=n.n($e);function Ze(){var e=Object(P.a)(["\n  display: inline-block;\n  min-width: 10rem;\n  text-align: center;\n  background: transparent;\n  color: ",";\n  font-size: 1.6rem;\n  border: none;\n  text-decoration: none;\n  text-align: center;\n  cursor: pointer;\n  transition: background 250ms ease-in-out, transform 150ms ease;\n  -webkit-appearance: none;\n  -moz-appearance: none;\n\n  &:hover {\n    cursor: pointer;\n  }\n\n  &:focus {\n    outline: none;\n  }\n\n  &:disabled {\n    color: #ccc;\n    cursor: not-allowed;\n  }\n"]);return Ze=function(){return e},e}function et(){var e=Object(P.a)(["\n  display: none;\n  margin-top: 1rem;\n  width: 100%;\n\n  @media (min-width: ",") {\n    display: ",";\n  }\n"]);return et=function(){return e},e}var tt=Object(B.a)("div")(et(),K,function(e){return e.hide?"none":"block"}),nt=Object(B.a)("div")({display:"flex",justifyContent:"center",width:"100%",marginBottom:"2rem",color:"#777"}),rt=Object(B.a)("div")({display:"flex",justifyContent:"center",width:"100%"}),at=Object(B.a)("button")(Ze(),function(e){return e.theme===V?"#eee":"#333"}),it=function(e){function t(){var e,n;Object(R.a)(this,t);for(var r=arguments.length,a=new Array(r),i=0;i<r;i++)a[i]=arguments[i];return(n=Object(_.a)(this,(e=Object(M.a)(t)).call.apply(e,[this].concat(a)))).handleReload=function(){n.props.reloadGame()},n.handlePlayPause=function(){n.props.toggleGamePause()},n.handleBackward=function(){n.props.stepBackwardFrame()},n.handleForward=function(){n.props.stepForwardFrame()},n.handleKeyEvent=function(e){switch(e){case"r":n.handleReload();break;case"left":n.handleBackward();break;case"right":n.handleForward();break;case"space":n.handlePlayPause()}},n}return Object(G.a)(t,e),Object(C.a)(t,[{key:"componentWillMount",value:function(){this.keyEvents=["r","left","right","space"]}},{key:"render",value:function(){return this.renderControls()}},{key:"renderControls",value:function(){var e=this.props,t=e.currentFrame,n=e.hideControls,r=e.paused,i=e.theme;return a.a.createElement(tt,{hide:n},a.a.createElement(nt,null,"Turn: ",t.turn),a.a.createElement(rt,null,a.a.createElement(at,{onClick:this.handleReload,disabled:0===t.turn||!r,theme:i},"Reload"),a.a.createElement(at,{onClick:this.handlePlayPause,theme:i},r?"Play":"Pause"),a.a.createElement(at,{onClick:this.handleBackward,disabled:0===t.turn||!r,theme:i},"Backward"),a.a.createElement(at,{onClick:this.handleForward,disabled:!r,theme:i},"Forward"),a.a.createElement(qe.a,{handleKeys:this.keyEvents,onKeyEvent:this.handleKeyEvent})))}}]),t}(a.a.Component);function ot(){var e=Object(P.a)(["\n  display: none;\n  width: 35vw;\n  margin-left: 2rem;\n\n  @media (min-width: ",") {\n    display: ",";\n  }\n"]);return ot=function(){return e},e}function ct(){var e=Object(P.a)(["\n  display: flex;\n  flex-direction: column;\n  width: 100%;\n  height: 100%;\n\n  @media (min-width: ",") {\n    width: ",";\n  }\n"]);return ct=function(){return e},e}function ut(){var e=Object(P.a)(["\n  position: relative;\n  height: 100%;\n  width: 100%;\n  background: ",";\n  background: ",";\n"]);return ut=function(){return e},e}var st,lt=Object(B.a)("div")(ut(),function(e){return e.theme===V?X:"transparent"},function(e){return e.theme===V?"linear-gradient(45deg, #000 0%, ".concat(X," 100%)"):"transparent"}),ht=Object(B.a)("div")({display:"flex",justifyContent:"space-between",width:"100%",height:"100%"}),dt=Object(B.a)("div")(ct(),K,function(e){return e.hideScoreboard?"100%":"65vw"}),pt=Object(B.a)("div")(ot(),K,function(e){return e.hide?"none":"block"}),ft=function(e){function t(){return Object(R.a)(this,t),Object(_.a)(this,Object(M.a)(t).apply(this,arguments))}return Object(G.a)(t,e),Object(C.a)(t,[{key:"componentWillMount",value:function(){var e=this.props.options;this.theme=this.props.options.boardTheme?this.props.options.boardTheme:W,e.game&&e.engine?(this.hideScoreboard="true"===this.props.options.hideScoreboard,this.props.setEngineOptions(e),this.props.fetchFrames()):this.invalidArgs=!0}},{key:"render",value:function(){var e=this.props.currentFrame;return this.invalidArgs?a.a.createElement(H,null):e?this.renderGame():a.a.createElement(Q,null)}},{key:"renderGame",value:function(){return a.a.createElement(lt,{theme:this.theme},a.a.createElement(ht,null,a.a.createElement(dt,{hideScoreboard:this.hideScoreboard},a.a.createElement(le,{snakes:this.props.currentFrame.snakes,food:this.props.currentFrame.food,columns:this.props.grid.width,rows:this.props.grid.height,highlightedSnake:this.props.highlightedSnake,theme:this.theme}),a.a.createElement(it,{currentFrame:this.props.currentFrame,hideControls:"true"===this.props.options.hideMediaControls,reloadGame:this.props.reloadGame,toggleGamePause:this.props.toggleGamePause,stepBackwardFrame:this.props.stepBackwardFrame,stepForwardFrame:this.props.stepForwardFrame,paused:this.props.paused,theme:this.theme})),!this.hideScoreboard&&a.a.createElement(pt,null,a.a.createElement(Qe,{turn:this.props.currentFrame.turn,snakes:this.props.currentFrame.snakes,food:this.props.currentFrame.food,highlightSnake:this.props.highlightSnake,theme:this.theme}))))}}]),t}(a.a.Component),mt=function(e,t){return{type:"RECEIVE_FRAME",game:e,frame:t}},vt=function(e){return{type:"SET_CURRENT_FRAME",frame:e}},gt=function(){return function(){var e=Object(pe.a)(de.a.mark(function e(t,n){var r,a,i,o,c,u,s;return de.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=n().engineOptions,a=r.autoplay,i=r.engine,o=r.game,c=r.turn,t({type:"REQUEST_FRAMES"}),e.next=4,Ae(i,o,function(e,r){if(t({type:"SET_GAME_STATUS",status:e.Game.Status}),r.Turn=r.Turn||0,t(mt(e,r)),0===r.Turn){var a=n().frames[0];t(vt(a))}});case 4:a&&(u=n().frames[0],t({type:"RESUME_GAME"}),t(yt(u))),c&&c<=n().frames.length&&(s=n().frames[c],t(vt(s)));case 6:case"end":return e.stop()}},e,this)}));return function(t,n){return e.apply(this,arguments)}}()},yt=function e(t){return function(){var n=Object(pe.a)(de.a.mark(function n(r,a){var i,o,c,u,s,l,h,d,p,f,m,v,g;return de.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:i=a().engineOptions.frameRate,o=a().frames.slice(),c=o.indexOf(t),u=o.slice(c),s=Math.ceil(i||20),l=1e3/s,h=!0,d=!1,p=void 0,n.prev=9,f=u[Symbol.iterator]();case 11:if(h=(m=f.next()).done){n.next=21;break}if(v=m.value,!a().paused){n.next=15;break}return n.abrupt("return");case 15:return r(vt(v)),n.next=18,Oe(l);case 18:h=!0,n.next=11;break;case 21:n.next=27;break;case 23:n.prev=23,n.t0=n.catch(9),d=!0,p=n.t0;case 27:n.prev=27,n.prev=28,h||null==f.return||f.return();case 30:if(n.prev=30,!d){n.next=33;break}throw p;case 33:return n.finish(30);case 34:return n.finish(27);case 35:(g=u[u.length-1]).gameOver?a().paused||r({type:"GAME_OVER"}):r(e(g));case 37:case"end":return n.stop()}},n,this,[[9,23,27,35],[28,,30,34]])}));return function(e,t){return n.apply(this,arguments)}}()},bt=(st=window.location.search)&&st.length?st.substr(1).split("&").map(j).reduce(function(e,t){return e[t.key]=t.value,e},{}):{},wt=Object(c.b)(function(e){return{options:bt,grid:e.grid,paused:e.paused,currentFrame:e.currentFrame,frames:e.frames,highlightedSnake:e.highlightedSnake,gameStatus:e.gameStatus}},function(e){return{setEngineOptions:function(t){return e({type:"SET_ENGINE_OPTIONS",engineOptions:t})},fetchFrames:function(){return e(gt())},reloadGame:function(){return e(function(){var e=Object(pe.a)(de.a.mark(function e(t,n){var r,a,i;return de.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:r=n(),a=r.frames,r.paused&&(i=Le(a,0),t(vt(i)));case 2:case"end":return e.stop()}},e,this)}));return function(t,n){return e.apply(this,arguments)}}())},toggleGamePause:function(t){return e(function(){var e=Object(pe.a)(de.a.mark(function e(t,n){var r,a,i,o,c;return de.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(r=n(),a=r.currentFrame,i=r.gameStatus,o=r.paused,c=r.engineOptions,!o){e.next=10;break}if("stopped"!==i){e.next=6;break}return e.next=5,Be(c.engine,c.game);case 5:t(gt());case 6:t({type:"RESUME_GAME"}),t(yt(a)),e.next=11;break;case 10:t({type:"PAUSE_GAME"});case 11:case"end":return e.stop()}},e,this)}));return function(t,n){return e.apply(this,arguments)}}())},stepForwardFrame:function(){return e(function(){var e=Object(pe.a)(de.a.mark(function e(t,n){var r,a,i,o,c;return de.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:r=n(),a=r.currentFrame,i=r.frames,o=a.turn+1,(c=Le(i,o))&&t(vt(c));case 4:case"end":return e.stop()}},e,this)}));return function(t,n){return e.apply(this,arguments)}}())},stepBackwardFrame:function(){return e(function(){var e=Object(pe.a)(de.a.mark(function e(t,n){var r,a,i,o,c;return de.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:r=n(),a=r.currentFrame,i=r.frames,o=a.turn-1,(c=Le(i,o))&&t(vt(c));case 4:case"end":return e.stop()}},e,this)}));return function(t,n){return e.apply(this,arguments)}}())},highlightSnake:function(t){return e(function(e){return{type:"HIGHLIGHT_SNAKE",snakeId:e}}(t))}}})(ft),kt=n(27),Et=Object(o.a)(kt.a),Ot=Object(o.c)(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_ENGINE_OPTIONS":return t.engineOptions.autoplay=t.engineOptions.autoplay&&"true"===t.engineOptions.autoplay,t.engineOptions.turn=parseInt(t.engineOptions.turn)||0,Object(s.a)({},e,{engineOptions:t.engineOptions});case"PAUSE_GAME":case"GAME_OVER":return Object(s.a)({},e,{paused:!0});case"RESUME_GAME":return Object(s.a)({},e,{paused:!1});case"SET_GAME_STATUS":return Object(s.a)({},e,{gameStatus:t.status});case"SET_CURRENT_FRAME":return x({action:t.type,frame:f(t.frame)}),Object(s.a)({},e,{currentFrame:t.frame});case"RECEIVE_FRAME":var n=p(t.frame);return Object(s.a)({},e,{grid:{height:t.game.Game.Height,width:t.game.Game.Width},frames:[].concat(Object(u.a)(e.frames),[n])});case"REQUEST_FRAMES":case"FETCH_FRAMES":return Object(s.a)({},e);case"HIGHLIGHT_SNAKE":return x({action:t.type,id:t.snakeId,name:t.snakeId?e.currentFrame.snakes.find(function(e){return e._id===t.snakeId}).name:null}),Object(s.a)({},e,{highlightedSnake:t.snakeId});default:return Object(s.a)({},e)}},{options:null,grid:[],frames:[],paused:!0,highlightedSnake:null},Et);Object(i.render)(a.a.createElement(c.a,{store:Ot},a.a.createElement(wt,null)),document.getElementById("root"))}},[[30,2,1]]]);
//# sourceMappingURL=main.2013762b.chunk.js.map